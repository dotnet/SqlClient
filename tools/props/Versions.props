<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <!-- Common Package Properties -->
  <PropertyGroup>
    <BuildNumber Condition="'$(BuildNumber)' == ''">0</BuildNumber>
  </PropertyGroup>

  <!-- Abstractions Package Properties -->
  <PropertyGroup>
    <!-- The current Major version number for the Abstractions package. -->
    <AbstractionsPackageMajorVersion>1</AbstractionsPackageMajorVersion>

    <!--
      The default Abstractions package version.  This may be overridden by
      specifying a value on the command-line:

        msbuild -p:AbstractionsPackageVersion=1.0.0
        dotnet build -p:AbstractionsPackageVersion=1.0.0
    -->
    <AbstractionsPackageVersion>$(AbstractionsPackageMajorVersion).0.0</AbstractionsPackageVersion>

    <!--
      We pin the AssemblyVersion of our package to its current Major version
      number, with all remaining parts set to 0.
    -->
    <AbstractionsPackageAssemblyVersion>$(AbstractionsPackageMajorVersion).0.0.0</AbstractionsPackageAssemblyVersion>
  </PropertyGroup>

  <!-- MDS Package Properties -->
  <PropertyGroup>
    <MdsVersionDefault>7.0.0</MdsVersionDefault>

    <MdsPackageVersion Condition="'$(MdsPackageVersion)' == ''">$(MdsVersionDefault).$(BuildNumber)-dev</MdsPackageVersion>

    <!--
      TODO: The remaining properties in this group should be renamed to be
      specific to MDS, and then used in the MDS project.  As-is, these names are
      used by the build tooling and may be unintentionally included in other
      (non-MDS) projects.
    -->

    <!--
      GOTCHA: These two Assembly properties must appear in the first
      <PropertyGroup> in this file due to hardcoded XML processing in:

      eng/pipelines/common/templates/jobs/validate-signed-package-job.yml
    -->
    <AssemblyFileVersion Condition="'$(AssemblyFileVersion)' == ''">$(MdsVersionDefault).$(BuildNumber)</AssemblyFileVersion>
    
    <!-- Only update the major version number here. -->
    <AssemblyVersion>7.0.0.0</AssemblyVersion>

    <FileVersion>$(AssemblyFileVersion)</FileVersion>
    <Version>$(MdsPackageVersion)</Version>
  </PropertyGroup>

  <!-- SqlServer Package Properties -->
  <PropertyGroup>
    <!-- This version section corresponds to version info of Microsoft.SqlServer.Server Assembly. -->
    <!-- Should only be changed in future when a non-backwards compatible driver is released. -->
    <!-- Future Assembly Version values shall be Major.Minor.0.0; e.g. 1.0.0.0 -->
    <SqlServerAssemblyVersion>1.0.0.0</SqlServerAssemblyVersion>
    <SqlServerAssemblyFileVersion Condition="'$(SqlServerAssemblyFileVersion)' == ''">1.0.0.0</SqlServerAssemblyFileVersion>
    <SqlServerPackageVersion Condition="'$(SqlServerPackageVersion)' == ''">1.0.0-dev</SqlServerPackageVersion>
    <SqlServerLibVersion>$(SqlServerPackageVersion)</SqlServerLibVersion>
  </PropertyGroup>

  <!-- AKV Package Properties -->
  <PropertyGroup>
    <TestAKVProviderVersion>$(AkvPackageVersion)</TestAKVProviderVersion>

    <!--
      GOTCHA: This property must appear in the last <PropertyGroup> in this file
      due to hardcoded XML processing in:

      eng/pipelines/common/templates/jobs/validate-signed-package-job.yml

      See the 'Modify TestMicrosoftDataSqlClientVersion' step.
    -->
    <TestMicrosoftDataSqlClientVersion>$(MdsPackageVersion)</TestMicrosoftDataSqlClientVersion>
  </PropertyGroup>
</Project>
