#################################################################################
# Licensed to the .NET Foundation under one or more agreements.                 #
# The .NET Foundation licenses this file to you under the MIT license.          #
# See the LICENSE file in the project root for more information.                #
#################################################################################
steps:
  # Install the .NET SDK and Runtimes.
  - template: /eng/pipelines/common/templates/steps/install-dotnet.yml@self
    parameters:
      runtimes: [8.x, 9.x]

  - script: SET
    displayName: 'Print Environment Variables'

  - powershell: |
      # use sqlcmd to try to connect to localdb
      $svc_name = "SQLBrowser"
      Get-Service $svc_name | Select-Object -Property Name, StartType, Status
      Set-Service -StartupType Automatic $svc_name
      net start $svc_name
      Get-Service $svc_name | Select-Object -Property Name, StartType, Status
    displayName: 'Start SQLBrowser'

  - task: NuGetToolInstaller@1
    displayName: 'Use NuGet'
