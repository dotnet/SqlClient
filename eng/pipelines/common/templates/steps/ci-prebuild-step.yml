#################################################################################
# Licensed to the .NET Foundation under one or more agreements.                 #
# The .NET Foundation licenses this file to you under the MIT license.          #
# See the LICENSE file in the project root for more information.                #
#################################################################################
parameters:
  - name: debug
    type: boolean
    default: false

  - name: referenceType
    type: string
    values:
      - Project
      - Package

steps:
- template: /eng/pipelines/common/templates/steps/ensure-dotnet-version.yml
  parameters:
    packageType: sdk
    usePreview: false
    version: 10.0

- template: /eng/pipelines/common/templates/steps/ensure-dotnet-version.yml
  parameters:
    packageType: runtime
    usePreview: false
    version: 9.0

- template: /eng/pipelines/common/templates/steps/ensure-dotnet-version.yml
  parameters:
    packageType: runtime
    usePreview: false
    version: 8.0

- ${{if eq(parameters.debug, true)}}:
  - powershell: |
      Get-ChildItem env: | Sort-Object Name
    displayName: 'List Environment Variables [debug]'

- ${{if eq(parameters.referenceType, 'Package')}}:
  - template: /eng/pipelines/common/templates/steps/update-nuget-config-local-feed-step.yml@self
    parameters:
      debug: ${{ parameters.debug }}
      packagePath: $(Build.SourcesDirectory)/packages
