#################################################################################
# Licensed to the .NET Foundation under one or more agreements.                 #
# The .NET Foundation licenses this file to you under the MIT license.          #
# See the LICENSE file in the project root for more information.                #
#################################################################################

variables:
  - group: ESRP Federated Creds (AME)
    # ESRPConnectedServiceName
    # ESRPClientId
    # AppRegistrationClientId
    # AppRegistrationTenantId
    # AuthAKVName
    # AuthSignCertName

  - name: CommitHead
    value: '' # the value will be extracted from the repo's head  
  - name: REPOROOT
    value: $(Build.SourcesDirectory)
  - name: softwareFolder
    value: $(REPOROOT)/software
  - name: symbolsFolder
    value: $(REPOROOT)/symbols
  - name: artifactDirectory
    value: '$(REPOROOT)/packages'

  # C# assembly versions must be in the format: Major.Minor.Build.Revision, but
  # $(Build.BuildNumber) has the format XXX.YY.  Additionally, each version part
  # must be a positive 16-bit integer less than 65535.  Simply concatenating
  # both parts of $(Build.BuildNumber) could produce values larger than 65534,
  # so we must omit the second part entirely.  Unfortunately, this may result
  # in multiple subsequent pipline builds using the same C# assembly versions.
  # The package versions will not be affected and will show the complete
  # $(Build.BuildNumber) values.
  - name: assemblyBuildNumber
    value: $[ split(variables['Build.BuildNumber'], '.')[0] ]
  
  # ----------------------------------------------------------------------------
  # MDS Package Versions

  # Update this after every release. This is used to generate the MDS NuGet package version.
  - name: Major
    value: '7'
  - name: Minor
    value: '0'
  - name: Patch
    value: '0'

  # Update this for preview releases.
  - name: Preview
    value: '-preview'
  - name: Revision
    value: '3'

  - name: mdsPackageVersion
    value: $(Major).$(Minor).$(Patch)
  - name: previewMdsPackageVersion
    value: $(Major).$(Minor).$(Patch)$(Preview)$(Revision).$(Build.BuildNumber)
  - name: mdsAssemblyFileVersion
    value: $(Major).$(Minor).$(Patch).$(assemblyBuildNumber)
  - name: nuspecPath
    value: '$(REPOROOT)/tools/specs/Microsoft.Data.SqlClient.nuspec'
