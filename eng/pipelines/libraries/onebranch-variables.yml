####################################################################################################
# Licensed to the .NET Foundation under one or more agreements.  The .NET Foundation licenses this
# file to you under the MIT license.  See the LICENSE file in the project root for more information.
####################################################################################################

# This file contains variables required by the OneBranch Official and Non-Official templates.
#
# These variables must be defined _before_ the OneBranch templates are extended from.
#
# This file is only included by the SqlClient Official and Non-Official top-level templates.

variables:

  # Needed for onebranch.pipeline.version task; see https://aka.ms/obpipelines/versioning
  - name: CDP_DEFINITION_BUILD_COUNT
    value: $[counter('', 0)]

  # We use an Azure Linux image for some stages; see https://aka.ms/obpipelines/containers
  - name: LinuxContainerImage
    value: mcr.microsoft.com/onebranch/azurelinux/build:3.0

  # Azure Linux images seem to require this to avoid interactive prompts from debian tooling.
  - name: DEBIAN_FRONTEND
    value: noninteractive

  - # Some stages, including Roslyn analysis, require a Windows agent with Visual Studio.
    name: WindowsContainerImage
    value: onebranch.azurecr.io/windows/ltsc2022/vse2022:latest

  # Enable SBOM signing for OneBranch builds.
  - name: Packaging.EnableSBOMSigning
    value: true

  # This entire directory tree will be published.  Any stage/job/step that generates interesting
  # artifacts must place them here or in sub-diretcories.
  - name: onebranchArtifactsPath
    value: $(Agent.BuildDirectory)/build

  # We don't want ApiScan to scan all build outputs, just the ones in this directory.  Any jobs that
  # produce assemblies _and_ where ApiScan wants to run must put their assemblies here.
  - name: apiScanPath
    value: $(Agent.BuildDirectory)/apiScan

  # Explicitly enable the SDL BinSkim task; see https://aka.ms/obpipelines/sdl
  - name: ob_sdl_binskim_break
    value: true
