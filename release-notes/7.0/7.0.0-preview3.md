# Release Notes

## Preview Release 7.0.0-preview3 - 2025-12-05

## Changes Since [7.0.0-preview2](7.0.0-preview2.md)

This update brings the following changes since the [7.0.0-preview2](7.0.0-preview2.md) release:

### Added

#### Added support for .NET 10

*What Changed:*

- Added support for .NET 10 by updating package references and enabling multi-targeting in test projects. This change was introduced in PR [#3686](https://github.com/dotnet/SqlClient/pull/3686).

*Who Benefits:*

- Developers targeting .NET 10.

*Impact:*

- Users can now build and run applications using Microsoft.Data.SqlClient on .NET 10.

#### Enabled User Agent Extension

*What Changed:*

- Enabled the User Agent Extension feature, allowing pre-calculated JSON payloads to be added to feature extension data and handling server acknowledgments. This change was introduced in PR [#3606](https://github.com/dotnet/SqlClient/pull/3606).

*Who Benefits:*

- Users utilizing the User Agent Extension feature for telemetry or tracking.

*Impact:*

- Enhanced telemetry and tracking capabilities with the User Agent Extension.

### Fixed

#### Fixed an issue with extra connection deactivation in `PutObjectFromTransactedPool`

*What Changed:*

- Removed an extraneous connection deactivation call in `PutObjectFromTransactedPool` that was causing active connection counts to go negative. This fix was introduced in PR [#3758](https://github.com/dotnet/SqlClient/pull/3758).

*Who Benefits:*

- Users using distributed transactions.

*Impact:*

- Fixes an issue where active connection counts could become incorrect when using distributed transactions.

### Changed

#### Enabled `SqlClientDiagnosticListener` in `SqlCommand` on .NET Framework

*What Changed:*

- Enabled `SqlClientDiagnosticListener` in `SqlCommand` for .NET Framework applications. This change was introduced in PR [#3658](https://github.com/dotnet/SqlClient/pull/3658).

*Who Benefits:*

- Developers using .NET Framework who need diagnostic information from `SqlCommand`.

*Impact:*

- `SqlCommand` execution will now emit diagnostic events on .NET Framework, consistent with .NET Core.

#### Performance improvements in `decimal.GetBits` usage and Always Encrypted primitives

*What Changed:*

- Optimized `decimal.GetBits` usage to reduce allocations on .NET 5+ and used lower-allocation primitives for Always Encrypted in `SqlColumnEncryptionCertificateStoreProvider`. These changes were introduced in PRs [#3732](https://github.com/dotnet/SqlClient/pull/3732) and [#3660](https://github.com/dotnet/SqlClient/pull/3660).

*Who Benefits:*

- Applications using `decimal` types or Always Encrypted with certificate store providers.

*Impact:*

- Reduced memory allocations and improved performance for supported scenarios.

#### Enabled NuGet audit on all builds

*What Changed:*

- Enabled implicit NuGet audits on all builds to detect vulnerabilities in dependencies. This change was introduced in PR [#3713](https://github.com/dotnet/SqlClient/pull/3713).

*Who Benefits:*

- Developers and users concerned with security and supply chain vulnerabilities.

*Impact:*

- Builds will now fail if vulnerabilities are detected in dependencies, ensuring a more secure codebase.

#### Code cleanup and refactoring

*What Changed:*

- Various code cleanup and refactoring tasks, including removing unused members, merging classes, and improving code health. These changes were introduced in PRs [#3803](https://github.com/dotnet/SqlClient/pull/3803), [#3781](https://github.com/dotnet/SqlClient/pull/3781), [#3760](https://github.com/dotnet/SqlClient/pull/3760), [#3746](https://github.com/dotnet/SqlClient/pull/3746), [#3743](https://github.com/dotnet/SqlClient/pull/3743), [#3738](https://github.com/dotnet/SqlClient/pull/3738), [#3683](https://github.com/dotnet/SqlClient/pull/3683), and [#3676](https://github.com/dotnet/SqlClient/pull/3676).

*Who Benefits:*

- Contributors and maintainers of the codebase.

*Impact:*

- Improved code maintainability and readability. No functional changes expected.

#### Test infrastructure updates

*What Changed:*

- Updates to test infrastructure, including enabling previously disabled tests and disabling flaky tests. These changes were introduced in PRs [#3750](https://github.com/dotnet/SqlClient/pull/3750), [#3823](https://github.com/dotnet/SqlClient/pull/3823), and [#3712](https://github.com/dotnet/SqlClient/pull/3712).

*Who Benefits:*

- Contributors and maintainers.

*Impact:*

- Improved test reliability and coverage.

#### Updated version variables for release

*What Changed:*

- Updated version variables for the 7.0.0-preview3 release. This change was introduced in PR [#3825](https://github.com/dotnet/SqlClient/pull/3825).

*Who Benefits:*

- N/A

*Impact:*

- Ensures correct versioning for the release.

## Contributors

We thank the following public contributors. Their efforts toward this project are very much appreciated.

- [edwardneal](https://github.com/edwardneal)

## Target Platform Support

- .NET Framework 4.6.2+ (Windows x86, Windows x64, Windows ARM64)
- .NET 8.0+ (Windows x86, Windows x64, Windows ARM, Windows ARM64, Linux, macOS)

### Dependencies

#### .NET Framework 4.6.2+

- Azure.Core 1.49.0
- Azure.Identity 1.16.0
- Microsoft.Bcl.Cryptography 8.0.0
- Microsoft.Data.SqlClient.SNI 6.0.2
- Microsoft.Extensions.Caching.Memory 8.0.1
- Microsoft.IdentityModel.JsonWebTokens 8.14.0
- Microsoft.IdentityModel.Protocols.OpenIdConnect 8.14.0
- System.Buffers 4.6.1
- System.Diagnostics.DiagnosticSource 8.0.1
- System.Memory 4.6.3
- System.Runtime.InteropServices.RuntimeInformation 4.3.0
- System.Security.Cryptography.Pkcs 8.0.1
- System.Text.Json 8.0.6
- System.Threading.Channels 8.0.0
- System.ValueTuple 4.6.1

#### .NET 8.0

- Azure.Core 1.49.0
- Azure.Identity 1.16.0
- Microsoft.Bcl.Cryptography 8.0.0
- Microsoft.Data.SqlClient.SNI.runtime 6.0.2
- Microsoft.Extensions.Caching.Memory 8.0.1
- Microsoft.IdentityModel.JsonWebTokens 8.14.0
- Microsoft.IdentityModel.Protocols.OpenIdConnect 8.14.0
- Microsoft.SqlServer.Server 1.0.0
- System.Configuration.ConfigurationManager 8.0.1
- System.Security.Cryptography.Pkcs 8.0.1

#### .NET 9.0

- Azure.Core 1.49.0
- Azure.Identity 1.16.0
- Microsoft.Bcl.Cryptography 9.0.9
- Microsoft.Data.SqlClient.SNI.runtime 6.0.2
- Microsoft.Extensions.Caching.Memory 9.0.9
- Microsoft.IdentityModel.JsonWebTokens 8.14.0
- Microsoft.IdentityModel.Protocols.OpenIdConnect 8.14.0
- Microsoft.SqlServer.Server 1.0.0
- System.Configuration.ConfigurationManager 9.0.9
- System.Security.Cryptography.Pkcs 9.0.9
